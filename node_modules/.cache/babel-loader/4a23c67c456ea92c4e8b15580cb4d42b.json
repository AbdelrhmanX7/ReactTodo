{"ast":null,"code":"import _classCallCheck from \"E:/Front-End-Challenges/React-Challenges/Completed Challenges/ReactTodo/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"E:/Front-End-Challenges/React-Challenges/Completed Challenges/ReactTodo/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _slicedToArray from \"E:/Front-End-Challenges/React-Challenges/Completed Challenges/ReactTodo/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { asap } from '@react-dnd/asap';\nimport { invariant } from '@react-dnd/invariant';\nimport { addSource as _addSource, addTarget as _addTarget, removeSource as _removeSource, removeTarget as _removeTarget } from '../actions/registry.js';\nimport { validateSourceContract, validateTargetContract, validateType } from '../contracts.js';\nimport { HandlerRole } from '../interfaces.js';\nimport { getNextUniqueId } from '../utils/getNextUniqueId.js';\n\nfunction getNextHandlerId(role) {\n  var id = getNextUniqueId().toString();\n\n  switch (role) {\n    case HandlerRole.SOURCE:\n      return \"S\".concat(id);\n\n    case HandlerRole.TARGET:\n      return \"T\".concat(id);\n\n    default:\n      throw new Error(\"Unknown Handler Role: \".concat(role));\n  }\n}\n\nfunction parseRoleFromHandlerId(handlerId) {\n  switch (handlerId[0]) {\n    case 'S':\n      return HandlerRole.SOURCE;\n\n    case 'T':\n      return HandlerRole.TARGET;\n\n    default:\n      throw new Error(\"Cannot parse handler ID: \".concat(handlerId));\n  }\n}\n\nfunction mapContainsValue(map, searchValue) {\n  var entries = map.entries();\n  var isDone = false;\n\n  do {\n    var _entries$next = entries.next(),\n        done = _entries$next.done,\n        _entries$next$value = _slicedToArray(_entries$next.value, 2),\n        value = _entries$next$value[1];\n\n    if (value === searchValue) {\n      return true;\n    }\n\n    isDone = !!done;\n  } while (!isDone);\n\n  return false;\n}\n\nexport var HandlerRegistryImpl = /*#__PURE__*/function () {\n  function HandlerRegistryImpl(store) {\n    _classCallCheck(this, HandlerRegistryImpl);\n\n    this.types = new Map();\n    this.dragSources = new Map();\n    this.dropTargets = new Map();\n    this.pinnedSourceId = null;\n    this.pinnedSource = null;\n    this.store = store;\n  }\n\n  _createClass(HandlerRegistryImpl, [{\n    key: \"addSource\",\n    value: function addSource(type, source) {\n      validateType(type);\n      validateSourceContract(source);\n      var sourceId = this.addHandler(HandlerRole.SOURCE, type, source);\n      this.store.dispatch(_addSource(sourceId));\n      return sourceId;\n    }\n  }, {\n    key: \"addTarget\",\n    value: function addTarget(type, target) {\n      validateType(type, true);\n      validateTargetContract(target);\n      var targetId = this.addHandler(HandlerRole.TARGET, type, target);\n      this.store.dispatch(_addTarget(targetId));\n      return targetId;\n    }\n  }, {\n    key: \"containsHandler\",\n    value: function containsHandler(handler) {\n      return mapContainsValue(this.dragSources, handler) || mapContainsValue(this.dropTargets, handler);\n    }\n  }, {\n    key: \"getSource\",\n    value: function getSource(sourceId) {\n      var includePinned = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      var isPinned = includePinned && sourceId === this.pinnedSourceId;\n      var source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId);\n      return source;\n    }\n  }, {\n    key: \"getTarget\",\n    value: function getTarget(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.dropTargets.get(targetId);\n    }\n  }, {\n    key: \"getSourceType\",\n    value: function getSourceType(sourceId) {\n      invariant(this.isSourceId(sourceId), 'Expected a valid source ID.');\n      return this.types.get(sourceId);\n    }\n  }, {\n    key: \"getTargetType\",\n    value: function getTargetType(targetId) {\n      invariant(this.isTargetId(targetId), 'Expected a valid target ID.');\n      return this.types.get(targetId);\n    }\n  }, {\n    key: \"isSourceId\",\n    value: function isSourceId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.SOURCE;\n    }\n  }, {\n    key: \"isTargetId\",\n    value: function isTargetId(handlerId) {\n      var role = parseRoleFromHandlerId(handlerId);\n      return role === HandlerRole.TARGET;\n    }\n  }, {\n    key: \"removeSource\",\n    value: function removeSource(sourceId) {\n      var _this = this;\n\n      invariant(this.getSource(sourceId), 'Expected an existing source.');\n      this.store.dispatch(_removeSource(sourceId));\n      asap(function () {\n        _this.dragSources.delete(sourceId);\n\n        _this.types.delete(sourceId);\n      });\n    }\n  }, {\n    key: \"removeTarget\",\n    value: function removeTarget(targetId) {\n      invariant(this.getTarget(targetId), 'Expected an existing target.');\n      this.store.dispatch(_removeTarget(targetId));\n      this.dropTargets.delete(targetId);\n      this.types.delete(targetId);\n    }\n  }, {\n    key: \"pinSource\",\n    value: function pinSource(sourceId) {\n      var source = this.getSource(sourceId);\n      invariant(source, 'Expected an existing source.');\n      this.pinnedSourceId = sourceId;\n      this.pinnedSource = source;\n    }\n  }, {\n    key: \"unpinSource\",\n    value: function unpinSource() {\n      invariant(this.pinnedSource, 'No source is pinned at the time.');\n      this.pinnedSourceId = null;\n      this.pinnedSource = null;\n    }\n  }, {\n    key: \"addHandler\",\n    value: function addHandler(role, type, handler) {\n      var id = getNextHandlerId(role);\n      this.types.set(id, type);\n\n      if (role === HandlerRole.SOURCE) {\n        this.dragSources.set(id, handler);\n      } else if (role === HandlerRole.TARGET) {\n        this.dropTargets.set(id, handler);\n      }\n\n      return id;\n    }\n  }]);\n\n  return HandlerRegistryImpl;\n}();","map":{"version":3,"mappings":"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","names":["asap","invariant","addSource","addTarget","removeSource","removeTarget","validateSourceContract","validateTargetContract","validateType","HandlerRole","getNextUniqueId","getNextHandlerId","role","id","toString","SOURCE","TARGET","Error","parseRoleFromHandlerId","handlerId","mapContainsValue","map","searchValue","entries","isDone","next","done","value","HandlerRegistryImpl","store","types","Map","dragSources","dropTargets","pinnedSourceId","pinnedSource","type","source","sourceId","addHandler","dispatch","target","targetId","handler","includePinned","isSourceId","isPinned","get","isTargetId","getSource","delete","getTarget","set"],"sources":["E:\\Front-End-Challenges\\React-Challenges\\Completed Challenges\\ReactTodo\\node_modules\\dnd-core\\src\\classes\\HandlerRegistryImpl.ts"],"sourcesContent":["import { asap } from '@react-dnd/asap'\nimport { invariant } from '@react-dnd/invariant'\nimport type { Store } from 'redux'\n\nimport {\n\taddSource,\n\taddTarget,\n\tremoveSource,\n\tremoveTarget,\n} from '../actions/registry.js'\nimport {\n\tvalidateSourceContract,\n\tvalidateTargetContract,\n\tvalidateType,\n} from '../contracts.js'\nimport type {\n\tDragSource,\n\tDropTarget,\n\tHandlerRegistry,\n\tIdentifier,\n\tSourceType,\n\tTargetType,\n} from '../interfaces.js'\nimport { HandlerRole } from '../interfaces.js'\nimport type { State } from '../reducers/index.js'\nimport { getNextUniqueId } from '../utils/getNextUniqueId.js'\n\nfunction getNextHandlerId(role: HandlerRole): string {\n\tconst id = getNextUniqueId().toString()\n\tswitch (role) {\n\t\tcase HandlerRole.SOURCE:\n\t\t\treturn `S${id}`\n\t\tcase HandlerRole.TARGET:\n\t\t\treturn `T${id}`\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown Handler Role: ${role}`)\n\t}\n}\n\nfunction parseRoleFromHandlerId(handlerId: string) {\n\tswitch (handlerId[0]) {\n\t\tcase 'S':\n\t\t\treturn HandlerRole.SOURCE\n\t\tcase 'T':\n\t\t\treturn HandlerRole.TARGET\n\t\tdefault:\n\t\t\tthrow new Error(`Cannot parse handler ID: ${handlerId}`)\n\t}\n}\n\nfunction mapContainsValue<T>(map: Map<string, T>, searchValue: T) {\n\tconst entries = map.entries()\n\tlet isDone = false\n\tdo {\n\t\tconst {\n\t\t\tdone,\n\t\t\tvalue: [, value],\n\t\t} = entries.next()\n\t\tif (value === searchValue) {\n\t\t\treturn true\n\t\t}\n\t\tisDone = !!done\n\t} while (!isDone)\n\treturn false\n}\n\nexport class HandlerRegistryImpl implements HandlerRegistry {\n\tprivate types: Map<string, SourceType | TargetType> = new Map()\n\tprivate dragSources: Map<string, DragSource> = new Map()\n\tprivate dropTargets: Map<string, DropTarget> = new Map()\n\tprivate pinnedSourceId: string | null = null\n\tprivate pinnedSource: any = null\n\tprivate store: Store<State>\n\n\tpublic constructor(store: Store<State>) {\n\t\tthis.store = store\n\t}\n\n\tpublic addSource(type: SourceType, source: DragSource): string {\n\t\tvalidateType(type)\n\t\tvalidateSourceContract(source)\n\n\t\tconst sourceId = this.addHandler(HandlerRole.SOURCE, type, source)\n\t\tthis.store.dispatch(addSource(sourceId))\n\t\treturn sourceId\n\t}\n\n\tpublic addTarget(type: TargetType, target: DropTarget): string {\n\t\tvalidateType(type, true)\n\t\tvalidateTargetContract(target)\n\n\t\tconst targetId = this.addHandler(HandlerRole.TARGET, type, target)\n\t\tthis.store.dispatch(addTarget(targetId))\n\t\treturn targetId\n\t}\n\n\tpublic containsHandler(handler: DragSource | DropTarget): boolean {\n\t\treturn (\n\t\t\tmapContainsValue(this.dragSources, handler) ||\n\t\t\tmapContainsValue(this.dropTargets, handler)\n\t\t)\n\t}\n\n\tpublic getSource(sourceId: string, includePinned = false): DragSource {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\tconst isPinned = includePinned && sourceId === this.pinnedSourceId\n\t\tconst source = isPinned ? this.pinnedSource : this.dragSources.get(sourceId)\n\t\treturn source\n\t}\n\n\tpublic getTarget(targetId: string): DropTarget {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.dropTargets.get(targetId) as DropTarget\n\t}\n\n\tpublic getSourceType(sourceId: string): Identifier {\n\t\tinvariant(this.isSourceId(sourceId), 'Expected a valid source ID.')\n\t\treturn this.types.get(sourceId) as Identifier\n\t}\n\n\tpublic getTargetType(targetId: string): Identifier | Identifier[] {\n\t\tinvariant(this.isTargetId(targetId), 'Expected a valid target ID.')\n\t\treturn this.types.get(targetId) as Identifier | Identifier[]\n\t}\n\n\tpublic isSourceId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.SOURCE\n\t}\n\n\tpublic isTargetId(handlerId: string): boolean {\n\t\tconst role = parseRoleFromHandlerId(handlerId)\n\t\treturn role === HandlerRole.TARGET\n\t}\n\n\tpublic removeSource(sourceId: string): void {\n\t\tinvariant(this.getSource(sourceId), 'Expected an existing source.')\n\t\tthis.store.dispatch(removeSource(sourceId))\n\t\tasap(() => {\n\t\t\tthis.dragSources.delete(sourceId)\n\t\t\tthis.types.delete(sourceId)\n\t\t})\n\t}\n\n\tpublic removeTarget(targetId: string): void {\n\t\tinvariant(this.getTarget(targetId), 'Expected an existing target.')\n\t\tthis.store.dispatch(removeTarget(targetId))\n\t\tthis.dropTargets.delete(targetId)\n\t\tthis.types.delete(targetId)\n\t}\n\n\tpublic pinSource(sourceId: string): void {\n\t\tconst source = this.getSource(sourceId)\n\t\tinvariant(source, 'Expected an existing source.')\n\n\t\tthis.pinnedSourceId = sourceId\n\t\tthis.pinnedSource = source\n\t}\n\n\tpublic unpinSource(): void {\n\t\tinvariant(this.pinnedSource, 'No source is pinned at the time.')\n\n\t\tthis.pinnedSourceId = null\n\t\tthis.pinnedSource = null\n\t}\n\n\tprivate addHandler(\n\t\trole: HandlerRole,\n\t\ttype: SourceType | TargetType,\n\t\thandler: DragSource | DropTarget,\n\t): string {\n\t\tconst id = getNextHandlerId(role)\n\t\tthis.types.set(id, type)\n\t\tif (role === HandlerRole.SOURCE) {\n\t\t\tthis.dragSources.set(id, handler as DragSource)\n\t\t} else if (role === HandlerRole.TARGET) {\n\t\t\tthis.dropTargets.set(id, handler as DropTarget)\n\t\t}\n\t\treturn id\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}